---
title: "bikedata"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
```{r}
library(ggplot2)
```

```{r}
tripdata = read.csv("G:/Analytics/BayAreaBikeShare_Analysis/201402_trip_data.csv")
weath_data = read.csv("G:/Analytics/BayAreaBikeShare_Analysis/201402_weather_data.csv")

```
```{r}
#summary(tripdata)
str(tripdata)
```
```{r}
tripdata[1:5,]
```

```{r}
ggplot(tripdata, aes(x = tripdata2$Subscription.Type)) + 
  geom_bar() 

```

```{r}
summary(tripdata2$Start.Date)
```


```{r}
tripdata2 = data.frame(tripdata)
tripdata2$Start.Date <- strptime(tripdata$Start.Date, "%m/%d/%Y %H:%M")
tripdata2$Start.hour = strftime(tripdata2$Start.Date, '%H')
str(tripdata2[1,3])

strftime(tripdata2[1:10,3], '%H:%M')
```

```{r}
ggplot(tripdata2, aes(x = Start.hour)) + 
  geom_bar(aes(fill = Subscription.Type), position = 'dodge') 
  scale_x_date(date_labels = "%H")
```
```{r}
tripdata2$Day = strftime(tripdata2$Start.Date, '%d')

```
```{r}
ggplot(tripdata2,aes(x = Start.Date, y = Duration)) + geom_line()
```

```{r}
tripdata2$Weekday = weekdays(tripdata2$Start.Date)
```
```{r}
ggplot(tripdata2, aes(x = Weekday)) + 
  geom_bar(aes(fill = Subscription.Type), position = 'dodge') 
  scale_x_date(date_labels = "%H")
```
```{r}
timeset<-data.frame(year=c(1986,1995,2011,1990,1998,2010),text=c('I was born','Had a nice icecream','Spotted a dodo','First swim','Crashed my bicycle','Bought a helmet'),y0=c(0.65,0.5,0.84,-0.64,-0.91,-0.56))
timeset

plot<-ggplot(timeset,aes(x=year,y=0))
plot<-plot+geom_segment(aes(y=0,yend=y0,xend=year))
plot<-plot+ geom_text(aes(y=y0,label=text),size=2.5,vjust=-1)
plot
plot= plot+geom_point(aes(y0))+ scale_y_continuous(limits=c(-2,2))
plot<-plot+geom_hline(y=0,size=1,color='purple')   #draw a vertical line
plot<-plot+geom_segment(x=2011.4,xend=2012.2,y=.2,yend=0,color='purple',size=1) + geom_segment(x=2011.4,xend=2012.2,y=-.2,yend=0,color='purple',size=1) #drawing the actual arrow
```

